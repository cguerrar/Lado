@{
    ViewData["Title"] = "Reportar Contenido";
    var contenido = ViewBag.Contenido as Lado.Models.Contenido;
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-danger text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-flag"></i> Reportar Contenido
                    </h4>
                </div>
                <div class="card-body">
                    <!-- Contenido a reportar -->
                    <div class="alert alert-warning mb-4">
                        <h6 class="alert-heading">Contenido que estás reportando:</h6>

                        <!-- Info del creador -->
                        <div class="d-flex align-items-center mb-3">
                            @if (!string.IsNullOrEmpty(contenido.Usuario.FotoPerfil))
                            {
                                <img src="@contenido.Usuario.FotoPerfil" alt="@contenido.Usuario.UserName"
                                     class="rounded-circle me-2" style="width: 40px; height: 40px; object-fit: cover;">
                            }
                            else
                            {
                                <div class="rounded-circle bg-primary text-white me-2 d-flex align-items-center justify-content-center"
                                     style="width: 40px; height: 40px;">
                                    <strong>@contenido.Usuario.UserName.Substring(0, 1).ToUpper()</strong>
                                </div>
                            }
                            <div>
                                <strong>@contenido.Usuario.UserName</strong><br>
                                <small class="text-muted">@contenido.FechaPublicacion.ToString("dd/MM/yyyy")</small>
                            </div>
                        </div>

                        <!-- Descripción del contenido -->
                        <p class="mb-2">
                            <strong>Descripción:</strong>
                            @(contenido.Descripcion.Length > 100
                                ? contenido.Descripcion.Substring(0, 100) + "..."
                                : contenido.Descripcion)
                        </p>

                        <!-- Preview del contenido -->
                        @if ((int)contenido.TipoContenido == 0 && !string.IsNullOrEmpty(contenido.RutaArchivo))
                        {
                            <div class="mt-2">
                                <img src="@contenido.RutaArchivo" alt="Preview"
                                     class="img-thumbnail" style="max-height: 200px; max-width: 100%;">
                            </div>
                        }
                        else if ((int)contenido.TipoContenido == 1)
                        {
                            <span class="badge bg-secondary">
                                <i class="fas fa-video"></i> Video
                            </span>
                        }
                    </div>

                    <!-- Formulario -->
                    <form method="post" asp-action="ReportarContenido">
                        <input type="hidden" name="contenidoId" value="@contenido.Id" />

                        <div class="mb-3">
                            <label class="form-label">
                                <strong>Motivo del reporte</strong>
                                <span class="text-danger">*</span>
                            </label>
                            <select name="motivo" class="form-select" required>
                                <option value="">Selecciona un motivo...</option>
                                <option value="Contenido sexual explícito no permitido">Contenido sexual explícito no permitido</option>
                                <option value="Violencia o contenido gráfico">Violencia o contenido gráfico</option>
                                <option value="Discurso de odio">Discurso de odio</option>
                                <option value="Acoso o intimidación">Acoso o intimidación</option>
                                <option value="Información falsa">Información falsa o engañosa</option>
                                <option value="Violación de derechos de autor">Violación de derechos de autor</option>
                                <option value="Spam o publicidad">Spam o publicidad no autorizada</option>
                                <option value="Contenido de menores">Contenido que involucra menores</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </div>

                        <div class="mb-4">
                            <label class="form-label">
                                <strong>Descripción detallada</strong>
                                <span class="text-muted">(Opcional)</span>
                            </label>
                            <textarea name="descripcion" class="form-control" rows="5"
                                      placeholder="Proporciona más detalles sobre por qué reportas este contenido..."></textarea>
                            <small class="text-muted">
                                Cuanto más detallado sea tu reporte, más rápido podremos actuar.
                            </small>
                        </div>

                        <!-- Información importante -->
                        <div class="alert alert-info">
                            <h6 class="alert-heading">
                                <i class="fas fa-info-circle"></i> Información importante
                            </h6>
                            <ul class="mb-0 small">
                                <li>Los reportes falsos pueden resultar en suspensión de tu cuenta</li>
                                <li>Tu identidad permanecerá anónima para el creador</li>
                                <li>El contenido será revisado por nuestro equipo de moderación</li>
                                <li>Si el contenido viola nuestras políticas, será eliminado</li>
                                <li>El proceso de revisión puede tomar hasta 48 horas</li>
                            </ul>
                        </div>

                        <!-- Botones -->
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-danger">
                                <i class="fas fa-flag"></i> Enviar Reporte
                            </button>
                            <a href="@Url.Action("Index", "Dashboard")" class="btn btn-outline-secondary">
                                Cancelar
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>